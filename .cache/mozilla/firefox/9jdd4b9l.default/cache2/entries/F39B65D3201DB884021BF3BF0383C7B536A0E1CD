M.core_comment={init:function(Y,options){var CommentHelper=function(args){CommentHelper.superclass.constructor.apply(this,arguments)};CommentHelper.NAME="COMMENT";CommentHelper.ATTRS={options:{},lang:{}};Y.extend(CommentHelper,Y.Base,{api:M.cfg.wwwroot+'/comment/comment_ajax.php',initializer:function(args){var scope=this;this.client_id=args.client_id;this.itemid=args.itemid;this.commentarea=args.commentarea;this.component=args.component;this.courseid=args.courseid;this.contextid=args.contextid;this.autostart=(args.autostart);if(this.autostart){this.view(args.page)}
var handle=Y.one('#comment-link-'+this.client_id);if(handle){if(args.notoggle){handle.setStyle('display','none')}
handle.on('click',function(e){e.preventDefault();this.view(0);return!1},this);handle.on('key',function(e){e.preventDefault();this.view(0);return!1},'13,32',this)}
scope.toggle_textarea(!1)},post:function(){var ta=Y.one('#dlg-content-'+this.client_id);var scope=this;var value=ta.get('value');if(value&&value!=M.util.get_string('addcomment','moodle')){ta.set('disabled',!0);ta.setStyles({'backgroundImage':'url('+M.util.image_url('i/loading_small','core')+')','backgroundRepeat':'no-repeat','backgroundPosition':'center center'});var params={'content':value};this.request({action:'add',scope:scope,params:params,callback:function(id,obj,args){var scope=args.scope;var cid=scope.client_id;var ta=Y.one('#dlg-content-'+cid);ta.set('value','');ta.set('disabled',!1);ta.setStyle('backgroundImage','none');scope.toggle_textarea(!1);var container=Y.one('#comment-list-'+cid);var result=scope.render([obj],!0);var newcomment=Y.Node.create(result.html);container.appendChild(newcomment);var ids=result.ids;var linkText=Y.one('#comment-link-text-'+cid);if(linkText){linkText.set('innerHTML',M.util.get_string('commentscount','moodle',obj.count))}
for(var i in ids){var attributes={color:{to:'#06e'},backgroundColor:{to:'#FFE390'}};var anim=new Y.YUI2.util.ColorAnim(ids[i],attributes);anim.animate()}
scope.register_pagination();scope.register_delete_buttons()}},!0)}else{var attributes={backgroundColor:{from:'#FFE390',to:'#FFFFFF'}};var anim=new Y.YUI2.util.ColorAnim('dlg-content-'+cid,attributes);anim.animate()}},request:function(args,noloading){var params={};var scope=this;if(args.scope){scope=args.scope}
params.sesskey=M.cfg.sesskey;params.action=args.action?args.action:'';params.client_id=this.client_id;params.itemid=this.itemid;params.area=this.commentarea;params.courseid=this.courseid;params.contextid=this.contextid;params.component=this.component;if(args.params){for(i in args.params){params[i]=args.params[i]}}
var cfg={method:'POST',on:{complete:function(id,o,p){if(!o){alert('IO FATAL');return!1}
var data=Y.JSON.parse(o.responseText);if(data.error){if(data.error=='require_login'){args.callback(id,data,p);return!0}
alert(data.error);return!1}else{args.callback(id,data,p);return!0}}},arguments:{scope:scope},headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'},data:build_querystring(params)};if(args.form){cfg.form=args.form}
Y.io(this.api,cfg);if(!noloading){this.wait()}},render:function(list,newcmt){var ret={};ret.ids=[];var template=Y.one('#cmt-tmpl');var html='';for(var i in list){var htmlid='comment-'+list[i].id+'-'+this.client_id;var val=template.get('innerHTML');if(list[i].profileurl){val=val.replace('___name___','<a href="'+list[i].profileurl+'">'+list[i].fullname+'</a>')}else{val=val.replace('___name___',list[i].fullname)}
if(list[i]['delete']||newcmt){var tokens={user:list[i].fullname,time:list[i].time};var deleteStr=Y.Escape.html(M.util.get_string('deletecommentbyon','moodle',tokens));list[i].content='<div class="comment-delete">'+'<a href="#" role="button" id ="comment-delete-'+this.client_id+'-'+list[i].id+'"'+'   title="'+deleteStr+'">'+'<span></span>'+'</a>'+'</div>'+list[i].content}
val=val.replace('___time___',list[i].time);val=val.replace('___picture___',list[i].avatar);val=val.replace('___content___',list[i].content);val='<li id="'+htmlid+'">'+val+'</li>';ret.ids.push(htmlid);html=(val+html)}
ret.html=html;return ret},load:function(page){var scope=this;var container=Y.one('#comment-ctrl-'+this.client_id);var params={'action':'get','page':page};this.request({scope:scope,params:params,callback:function(id,ret,args){var linkText=Y.one('#comment-link-text-'+scope.client_id);if(ret.count&&linkText){linkText.set('innerHTML',M.util.get_string('commentscount','moodle',ret.count))}
var container=Y.one('#comment-list-'+scope.client_id);var pagination=Y.one('#comment-pagination-'+scope.client_id);if(ret.pagination){pagination.set('innerHTML',ret.pagination)}else{pagination.set('innerHTML','')}
if(ret.error=='require_login'){var result={};result.html=M.util.get_string('commentsrequirelogin','moodle')}else{var result=scope.render(ret.list)}
container.set('innerHTML',result.html);var img=Y.one('#comment-img-'+scope.client_id);if(img){img.set('src',M.util.image_url('t/expanded','core'))}
args.scope.register_pagination();args.scope.register_delete_buttons()}})},dodelete:function(id){var scope=this,cid=scope.client_id,params={'commentid':id};function remove_dom(type,anim,cmt){cmt.remove();var linkText=Y.one('#comment-link-text-'+cid),comments=Y.all('#comment-list-'+cid+' li');if(linkText&&comments){linkText.set('innerHTML',M.util.get_string('commentscount','moodle',comments.size()))}}
this.request({action:'delete',scope:scope,params:params,callback:function(id,resp,args){var htmlid='comment-'+resp.commentid+'-'+resp.client_id;var attributes={width:{to:0},height:{to:0}};var cmt=Y.one('#'+htmlid);cmt.setStyle('overflow','hidden');var anim=new Y.YUI2.util.Anim(htmlid,attributes,1,Y.YUI2.util.Easing.easeOut);anim.onComplete.subscribe(remove_dom,cmt,this);anim.animate()}},!0)},register_actions:function(){var action_btn=Y.one('#comment-action-post-'+this.client_id);if(action_btn){action_btn.on('click',function(e){e.preventDefault();this.post();return!1},this)}
var cancel=Y.one('#comment-action-cancel-'+this.client_id);if(cancel){cancel.on('click',function(e){e.preventDefault();this.view(0);return!1},this)}},register_delete_buttons:function(){var scope=this;Y.all('div.comment-delete a').each(function(node,id){var theid=node.get('id');var parseid=new RegExp("comment-delete-"+scope.client_id+"-(\\d+)","i");var commentid=theid.match(parseid);if(!commentid){return}
if(commentid[1]){Y.Event.purgeElement('#'+theid,!1,'click')}
node.on('click',function(e){e.preventDefault();if(commentid[1]){scope.dodelete(commentid[1])}});node.on('key',function(e){e.preventDefault();if(commentid[1]){scope.dodelete(commentid[1])}},'13,32');require(['core/templates','core/notification'],function(Templates,Notification){var title=node.getAttribute('title');Templates.renderPix('t/delete','core',title).then(function(html){node.set('innerHTML',html)}).catch(Notification.exception)})})},register_pagination:function(){var scope=this;Y.all('#comment-pagination-'+this.client_id+' a').each(function(node,id){node.on('click',function(e,node){e.preventDefault();var id=node.get('id');var re=new RegExp("comment-page-"+this.client_id+"-(\\d+)","i");var result=id.match(re);this.load(result[1])},scope,node)})},view:function(page){var commenttoggler=Y.one('#comment-link-'+this.client_id);var container=Y.one('#comment-ctrl-'+this.client_id);var ta=Y.one('#dlg-content-'+this.client_id);var img=Y.one('#comment-img-'+this.client_id);var d=container.getStyle('display');if(d=='none'||d==''){if(!this.autostart){this.load(page)}else{this.register_delete_buttons();this.register_pagination()}
container.setStyle('display','block');if(img){img.set('src',M.util.image_url('t/expanded','core'))}
if(commenttoggler){commenttoggler.setAttribute('aria-expanded','true')}}else{container.setStyle('display','none');var collapsedimage='t/collapsed';if(Y.one(document.body).hasClass('dir-rtl')){collapsedimage='t/collapsed_rtl'}else{collapsedimage='t/collapsed'}
if(img){img.set('src',M.util.image_url(collapsedimage,'core'))}
if(ta){ta.set('value','')}
if(commenttoggler){commenttoggler.setAttribute('aria-expanded','false')}}
if(ta){ta.on('focus',function(){this.toggle_textarea(!0)},this);ta.on('blur',function(){this.toggle_textarea(!1)},this)}
this.register_actions();return!1},toggle_textarea:function(focus){var t=Y.one('#dlg-content-'+this.client_id);if(!t){return!1}
if(focus){if(t.get('value')==M.util.get_string('addcomment','moodle')){t.set('value','');t.setStyle('color','black')}}else{if(t.get('value')==''){t.set('value',M.util.get_string('addcomment','moodle'));t.setStyle('color','grey');t.set('rows',2)}}},wait:function(){var container=Y.one('#comment-list-'+this.client_id);container.set('innerHTML','<div class="mdl-align"><img src="'+M.util.image_url('i/loading_small','core')+'" /></div>')}});new CommentHelper(options)},init_admin:function(Y){var select_all=Y.one('#comment_select_all');if(select_all){select_all.on('click',function(e){var comments=document.getElementsByName('comments');var checked=!1;for(var i in comments){if(comments[i].checked){checked=!0}}
for(i in comments){comments[i].checked=!checked}
this.set('checked',!checked)})}
var comments_delete=Y.one('#comments_delete');if(comments_delete){comments_delete.on('click',function(e){e.preventDefault();var list='';var comments=document.getElementsByName('comments');for(var i in comments){if(typeof comments[i]=='object'&&comments[i].checked){list+=(comments[i].value+'-')}}
if(!list){return}
var args={};args.message=M.util.get_string('confirmdeletecomments','admin');args.callback=function(){var url=M.cfg.wwwroot+'/comment/index.php';var data={'commentids':list,'sesskey':M.cfg.sesskey,'action':'delete'};var cfg={method:'POST',on:{complete:function(id,o,p){if(!o){alert('IO FATAL');return}
if(o.responseText=='yes'){location.reload()}}},arguments:{scope:this},headers:{'Content-Type':'application/x-www-form-urlencoded; charset=UTF-8'},data:build_querystring(data)};Y.io(url,cfg)};M.util.show_confirm_dialog(e,args)})}}}         20180704192850%                                             „&      M . c o r e _ c o m m e n t = { i n i t : f u n c t i o n ( Y , o p t i o n s ) { v a r   C o m m e n t H e l p e r = f u n c t i o n ( a r g s ) { C o m m e n t H e l p e r . s u p e r c l a s s . c o n s t r u c t o r . a p p l y ( t h i s , a r g u m e n t s ) } ; C o m m e n t H e l p e r . N A M E = " C O M M E N T " ; C o m m e n t H e l p e r . A T T R S = { o p t i o n s : { } , l a n g : { } } ; Y . e x t e n d ( C o m m e n t H e l p e r , Y . B a s e , { a p i : M . c f g . w w w r o o t + ' / c o m m e n t / c o m m e n t _ a j a x . p h p ' , i n i t i a l i z e r : f u n c t i o n ( a r g s ) { v a r   s c o p e = t h i s ; t h i s . c l i e n t _ i d = a r g s . c l i e n t _ i d ; t h i s . i t e m i d = a r g s . i t e m i d ; t h i s . c o m m e n t a r e a = a r g s . c o m m e n t a r e a ; t h i s . c o m p o n e n t = a r g s . c o m p o n e n t ; t h i s . c o u r s e i d = a r g s . c o u r s e i d ; t h i s . c o n t e x t i d = a r g s . c o n t e x t i d ; t h i s . a u t o s t a r t = ( a r g s . a u t o s t a r t ) ; i f ( t h i s . a u t o s t a r t ) { t h i s . v i e w ( a r g s . p a g e ) } 
 v a r   h a n d l e = Y . o n e ( ' # c o m m e n t - l i n k - ' + t h i s . c l i e n t _ i d ) ; i f ( h a n d l e ) { i f ( a r g s . n o t o g g l e ) { h a n d l e . s e t S t y l e ( ' d i s p l a y ' , ' n o n e ' ) } 
 h a n d l e . o n ( ' c l i c k ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; t h i s . v i e w ( 0 ) ; r e t u r n ! 1 } , t h i s ) ; h a n d l e . o n ( ' k e y ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; t h i s . v i e w ( 0 ) ; r e t u r n ! 1 } , ' 1 3 , 3 2 ' , t h i s ) } 
 s c o p e . t o g g l e _ t e x t a r e a ( ! 1 ) } , p o s t : f u n c t i o n ( ) { v a r   t a = Y . o n e ( ' # d l g - c o n t e n t - ' + t h i s . c l i e n t _ i d ) ; v a r   s c o p e = t h i s ; v a r   v a l u e = t a . g e t ( ' v a l u e ' ) ; i f ( v a l u e & & v a l u e ! = M . u t i l . g e t _ s t r i n g ( ' a d d c o m m e n t ' , ' m o o d l e ' ) ) { t a . s e t ( ' d i s a b l e d ' , ! 0 ) ; t a . s e t S t y l e s ( { ' b a c k g r o u n d I m a g e ' : ' u r l ( ' + M . u t i l . i m a g e _ u r l ( ' i / l o a d i n g _ s m a l l ' , ' c o r e ' ) + ' ) ' , ' b a c k g r o u n d R e p e a t ' : ' n o - r e p e a t ' , ' b a c k g r o u n d P o s i t i o n ' : ' c e n t e r   c e n t e r ' } ) ; v a r   p a r a m s = { ' c o n t e n t ' : v a l u e } ; t h i s . r e q u e s t ( { a c t i o n : ' a d d ' , s c o p e : s c o p e , p a r a m s : p a r a m s , c a l l b a c k : f u n c t i o n ( i d , o b j , a r g s ) { v a r   s c o p e = a r g s . s c o p e ; v a r   c i d = s c o p e . c l i e n t _ i d ; v a r   t a = Y . o n e ( ' # d l g - c o n t e n t - ' + c i d ) ; t a . s e t ( ' v a l u e ' , ' ' ) ; t a . s e t ( ' d i s a b l e d ' , ! 1 ) ; t a . s e t S t y l e ( ' b a c k g r o u n d I m a g e ' , ' n o n e ' ) ; s c o p e . t o g g l e _ t e x t a r e a ( ! 1 ) ; v a r   c o n t a i n e r = Y . o n e ( ' # c o m m e n t - l i s t - ' + c i d ) ; v a r   r e s u l t = s c o p e . r e n d e r ( [ o b j ] , ! 0 ) ; v a r   n e w c o m m e n t = Y . N o d e . c r e a t e ( r e s u l t . h t m l ) ; c o n t a i n e r . a p p e n d C h i l d ( n e w c o m m e n t ) ; v a r   i d s = r e s u l t . i d s ; v a r   l i n k T e x t = Y . o n e ( ' # c o m m e n t - l i n k - t e x t - ' + c i d ) ; i f ( l i n k T e x t ) { l i n k T e x t . s e t ( ' i n n e r H T M L ' , M . u t i l . g e t _ s t r i n g ( ' c o m m e n t s c o u n t ' , ' m o o d l e ' , o b j . c o u n t ) ) } 
 f o r ( v a r   i   i n   i d s ) { v a r   a t t r i b u t e s = { c o l o r : { t o : ' # 0 6 e ' } , b a c k g r o u n d C o l o r : { t o : ' # F F E 3 9 0 ' } } ; v a r   a n i m = n e w   Y . Y U I 2 . u t i l . C o l o r A n i m ( i d s [ i ] , a t t r i b u t e s ) ; a n i m . a n i m a t e ( ) } 
 s c o p e . r e g i s t e r _ p a g i n a t i o n ( ) ; s c o p e . r e g i s t e r _ d e l e t e _ b u t t o n s ( ) } } , ! 0 ) } e l s e { v a r   a t t r i b u t e s = { b a c k g r o u n d C o l o r : { f r o m : ' # F F E 3 9 0 ' , t o : ' # F F F F F F ' } } ; v a r   a n i m = n e w   Y . Y U I 2 . u t i l . C o l o r A n i m ( ' d l g - c o n t e n t - ' + c i d , a t t r i b u t e s ) ; a n i m . a n i m a t e ( ) } } , r e q u e s t : f u n c t i o n ( a r g s , n o l o a d i n g ) { v a r   p a r a m s = { } ; v a r   s c o p e = t h i s ; i f ( a r g s . s c o p e ) { s c o p e = a r g s . s c o p e } 
 p a r a m s . s e s s k e y = M . c f g . s e s s k e y ; p a r a m s . a c t i o n = a r g s . a c t i o n ? a r g s . a c t i o n : ' ' ; p a r a m s . c l i e n t _ i d = t h i s . c l i e n t _ i d ; p a r a m s . i t e m i d = t h i s . i t e m i d ; p a r a m s . a r e a = t h i s . c o m m e n t a r e a ; p a r a m s . c o u r s e i d = t h i s . c o u r s e i d ; p a r a m s . c o n t e x t i d = t h i s . c o n t e x t i d ; p a r a m s . c o m p o n e n t = t h i s . c o m p o n e n t ; i f ( a r g s . p a r a m s ) { f o r ( i   i n   a r g s . p a r a m s ) { p a r a m s [ i ] = a r g s . p a r a m s [ i ] } } 
 v a r   c f g = { m e t h o d : ' P O S T ' , o n : { c o m p l e t e : f u n c t i o n ( i d , o , p ) { i f ( ! o ) { a l e r t ( ' I O   F A T A L ' ) ; r e t u r n ! 1 } 
 v a r   d a t a = Y . J S O N . p a r s e ( o . r e s p o n s e T e x t ) ; i f ( d a t a . e r r o r ) { i f ( d a t a . e r r o r = = ' r e q u i r e _ l o g i n ' ) { a r g s . c a l l b a c k ( i d , d a t a , p ) ; r e t u r n ! 0 } 
 a l e r t ( d a t a . e r r o r ) ; r e t u r n ! 1 } e l s e { a r g s . c a l l b a c k ( i d , d a t a , p ) ; r e t u r n ! 0 } } } , a r g u m e n t s : { s c o p e : s c o p e } , h e a d e r s : { ' C o n t e n t - T y p e ' : ' a p p l i c a t i o n / x - w w w - f o r m - u r l e n c o d e d ;   c h a r s e t = U T F - 8 ' } , d a t a : b u i l d _ q u e r y s t r i n g ( p a r a m s ) } ; i f ( a r g s . f o r m ) { c f g . f o r m = a r g s . f o r m } 
 Y . i o ( t h i s . a p i , c f g ) ; i f ( ! n o l o a d i n g ) { t h i s . w a i t ( ) } } , r e n d e r : f u n c t i o n ( l i s t , n e w c m t ) { v a r   r e t = { } ; r e t . i d s = [ ] ; v a r   t e m p l a t e = Y . o n e ( ' # c m t - t m p l ' ) ; v a r   h t m l = ' ' ; f o r ( v a r   i   i n   l i s t ) { v a r   h t m l i d = ' c o m m e n t - ' + l i s t [ i ] . i d + ' - ' + t h i s . c l i e n t _ i d ; v a r   v a l = t e m p l a t e . g e t ( ' i n n e r H T M L ' ) ; i f ( l i s t [ i ] . p r o f i l e u r l ) { v a l = v a l . r e p l a c e ( ' _ _ _ n a m e _ _ _ ' , ' < a   h r e f = " ' + l i s t [ i ] . p r o f i l e u r l + ' " > ' + l i s t [ i ] . f u l l n a m e + ' < / a > ' ) } e l s e { v a l = v a l . r e p l a c e ( ' _ _ _ n a m e _ _ _ ' , l i s t [ i ] . f u l l n a m e ) } 
 i f ( l i s t [ i ] [ ' d e l e t e ' ] | | n e w c m t ) { v a r   t o k e n s = { u s e r : l i s t [ i ] . f u l l n a m e , t i m e : l i s t [ i ] . t i m e } ; v a r   d e l e t e S t r = Y . E s c a p e . h t m l ( M . u t i l . g e t _ s t r i n g ( ' d e l e t e c o m m e n t b y o n ' , ' m o o d l e ' , t o k e n s ) ) ; l i s t [ i ] . c o n t e n t = ' < d i v   c l a s s = " c o m m e n t - d e l e t e " > ' + ' < a   h r e f = " # "   r o l e = " b u t t o n "   i d   = " c o m m e n t - d e l e t e - ' + t h i s . c l i e n t _ i d + ' - ' + l i s t [ i ] . i d + ' " ' + '       t i t l e = " ' + d e l e t e S t r + ' " > ' + ' < s p a n > < / s p a n > ' + ' < / a > ' + ' < / d i v > ' + l i s t [ i ] . c o n t e n t } 
 v a l = v a l . r e p l a c e ( ' _ _ _ t i m e _ _ _ ' , l i s t [ i ] . t i m e ) ; v a l = v a l . r e p l a c e ( ' _ _ _ p i c t u r e _ _ _ ' , l i s t [ i ] . a v a t a r ) ; v a l = v a l . r e p l a c e ( ' _ _ _ c o n t e n t _ _ _ ' , l i s t [ i ] . c o n t e n t ) ; v a l = ' < l i   i d = " ' + h t m l i d + ' " > ' + v a l + ' < / l i > ' ; r e t . i d s . p u s h ( h t m l i d ) ; h t m l = ( v a l + h t m l ) } 
 r e t . h t m l = h t m l ; r e t u r n   r e t } , l o a d : f u n c t i o n ( p a g e ) { v a r   s c o p e = t h i s ; v a r   c o n t a i n e r = Y . o n e ( ' # c o m m e n t - c t r l - ' + t h i s . c l i e n t _ i d ) ; v a r   p a r a m s = { ' a c t i o n ' : ' g e t ' , ' p a g e ' : p a g e } ; t h i s . r e q u e s t ( { s c o p e : s c o p e , p a r a m s : p a r a m s , c a l l b a c k : f u n c t i o n ( i d , r e t , a r g s ) { v a r   l i n k T e x t = Y . o n e ( ' # c o m m e n t - l i n k - t e x t - ' + s c o p e . c l i e n t _ i d ) ; i f ( r e t . c o u n t & & l i n k T e x t ) { l i n k T e x t . s e t ( ' i n n e r H T M L ' , M . u t i l . g e t _ s t r i n g ( ' c o m m e n t s c o u n t ' , ' m o o d l e ' , r e t . c o u n t ) ) } 
 v a r   c o n t a i n e r = Y . o n e ( ' # c o m m e n t - l i s t - ' + s c o p e . c l i e n t _ i d ) ; v a r   p a g i n a t i o n = Y . o n e ( ' # c o m m e n t - p a g i n a t i o n - ' + s c o p e . c l i e n t _ i d ) ; i f ( r e t . p a g i n a t i o n ) { p a g i n a t i o n . s e t ( ' i n n e r H T M L ' , r e t . p a g i n a t i o n ) } e l s e { p a g i n a t i o n . s e t ( ' i n n e r H T M L ' , ' ' ) } 
 i f ( r e t . e r r o r = = ' r e q u i r e _ l o g i n ' ) { v a r   r e s u l t = { } ; r e s u l t . h t m l = M . u t i l . g e t _ s t r i n g ( ' c o m m e n t s r e q u i r e l o g i n ' , ' m o o d l e ' ) } e l s e { v a r   r e s u l t = s c o p e . r e n d e r ( r e t . l i s t ) } 
 c o n t a i n e r . s e t ( ' i n n e r H T M L ' , r e s u l t . h t m l ) ; v a r   i m g = Y . o n e ( ' # c o m m e n t - i m g - ' + s c o p e . c l i e n t _ i d ) ; i f ( i m g ) { i m g . s e t ( ' s r c ' , M . u t i l . i m a g e _ u r l ( ' t / e x p a n d e d ' , ' c o r e ' ) ) } 
 a r g s . s c o p e . r e g i s t e r _ p a g i n a t i o n ( ) ; a r g s . s c o p e . r e g i s t e r _ d e l e t e _ b u t t o n s ( ) } } ) } , d o d e l e t e : f u n c t i o n ( i d ) { v a r   s c o p e = t h i s , c i d = s c o p e . c l i e n t _ i d , p a r a m s = { ' c o m m e n t i d ' : i d } ; f u n c t i o n   r e m o v e _ d o m ( t y p e , a n i m , c m t ) { c m t . r e m o v e ( ) ; v a r   l i n k T e x t = Y . o n e ( ' # c o m m e n t - l i n k - t e x t - ' + c i d ) , c o m m e n t s = Y . a l l ( ' # c o m m e n t - l i s t - ' + c i d + '   l i ' ) ; i f ( l i n k T e x t & & c o m m e n t s ) { l i n k T e x t . s e t ( ' i n n e r H T M L ' , M . u t i l . g e t _ s t r i n g ( ' c o m m e n t s c o u n t ' , ' m o o d l e ' , c o m m e n t s . s i z e ( ) ) ) } } 
 t h i s . r e q u e s t ( { a c t i o n : ' d e l e t e ' , s c o p e : s c o p e , p a r a m s : p a r a m s , c a l l b a c k : f u n c t i o n ( i d , r e s p , a r g s ) { v a r   h t m l i d = ' c o m m e n t - ' + r e s p . c o m m e n t i d + ' - ' + r e s p . c l i e n t _ i d ; v a r   a t t r i b u t e s = { w i d t h : { t o : 0 } , h e i g h t : { t o : 0 } } ; v a r   c m t = Y . o n e ( ' # ' + h t m l i d ) ; c m t . s e t S t y l e ( ' o v e r f l o w ' , ' h i d d e n ' ) ; v a r   a n i m = n e w   Y . Y U I 2 . u t i l . A n i m ( h t m l i d , a t t r i b u t e s , 1 , Y . Y U I 2 . u t i l . E a s i n g . e a s e O u t ) ; a n i m . o n C o m p l e t e . s u b s c r i b e ( r e m o v e _ d o m , c m t , t h i s ) ; a n i m . a n i m a t e ( ) } } , ! 0 ) } , r e g i s t e r _ a c t i o n s : f u n c t i o n ( ) { v a r   a c t i o n _ b t n = Y . o n e ( ' # c o m m e n t - a c t i o n - p o s t - ' + t h i s . c l i e n t _ i d ) ; i f ( a c t i o n _ b t n ) { a c t i o n _ b t n . o n ( ' c l i c k ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; t h i s . p o s t ( ) ; r e t u r n ! 1 } , t h i s ) } 
 v a r   c a n c e l = Y . o n e ( ' # c o m m e n t - a c t i o n - c a n c e l - ' + t h i s . c l i e n t _ i d ) ; i f ( c a n c e l ) { c a n c e l . o n ( ' c l i c k ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; t h i s . v i e w ( 0 ) ; r e t u r n ! 1 } , t h i s ) } } , r e g i s t e r _ d e l e t e _ b u t t o n s : f u n c t i o n ( ) { v a r   s c o p e = t h i s ; Y . a l l ( ' d i v . c o m m e n t - d e l e t e   a ' ) . e a c h ( f u n c t i o n ( n o d e , i d ) { v a r   t h e i d = n o d e . g e t ( ' i d ' ) ; v a r   p a r s e i d = n e w   R e g E x p ( " c o m m e n t - d e l e t e - " + s c o p e . c l i e n t _ i d + " - ( \ \ d + ) " , " i " ) ; v a r   c o m m e n t i d = t h e i d . m a t c h ( p a r s e i d ) ; i f ( ! c o m m e n t i d ) { r e t u r n } 
 i f ( c o m m e n t i d [ 1 ] ) { Y . E v e n t . p u r g e E l e m e n t ( ' # ' + t h e i d , ! 1 , ' c l i c k ' ) } 
 n o d e . o n ( ' c l i c k ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; i f ( c o m m e n t i d [ 1 ] ) { s c o p e . d o d e l e t e ( c o m m e n t i d [ 1 ] ) } } ) ; n o d e . o n ( ' k e y ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; i f ( c o m m e n t i d [ 1 ] ) { s c o p e . d o d e l e t e ( c o m m e n t i d [ 1 ] ) } } , ' 1 3 , 3 2 ' ) ; r e q u i r e ( [ ' c o r e / t e m p l a t e s ' , ' c o r e / n o t i f i c a t i o n ' ] , f u n c t i o n ( T e m p l a t e s , N o t i f i c a t i o n ) { v a r   t i t l e = n o d e . g e t A t t r i b u t e ( ' t i t l e ' ) ; T e m p l a t e s . r e n d e r P i x ( ' t / d e l e t e ' , ' c o r e ' , t i t l e ) . t h e n ( f u n c t i o n ( h t m l ) { n o d e . s e t ( ' i n n e r H T M L ' , h t m l ) } ) . c a t c h ( N o t i f i c a t i o n . e x c e p t i o n ) } ) } ) } , r e g i s t e r _ p a g i n a t i o n : f u n c t i o n ( ) { v a r   s c o p e = t h i s ; Y . a l l ( ' # c o m m e n t - p a g i n a t i o n - ' + t h i s . c l i e n t _ i d + '   a ' ) . e a c h ( f u n c t i o n ( n o d e , i d ) { n o d e . o n ( ' c l i c k ' , f u n c t i o n ( e , n o d e ) { e . p r e v e n t D e f a u l t ( ) ; v a r   i d = n o d e . g e t ( ' i d ' ) ; v a r   r e = n e w   R e g E x p ( " c o m m e n t - p a g e - " + t h i s . c l i e n t _ i d + " - ( \ \ d + ) " , " i " ) ; v a r   r e s u l t = i d . m a t c h ( r e ) ; t h i s . l o a d ( r e s u l t [ 1 ] ) } , s c o p e , n o d e ) } ) } , v i e w : f u n c t i o n ( p a g e ) { v a r   c o m m e n t t o g g l e r = Y . o n e ( ' # c o m m e n t - l i n k - ' + t h i s . c l i e n t _ i d ) ; v a r   c o n t a i n e r = Y . o n e ( ' # c o m m e n t - c t r l - ' + t h i s . c l i e n t _ i d ) ; v a r   t a = Y . o n e ( ' # d l g - c o n t e n t - ' + t h i s . c l i e n t _ i d ) ; v a r   i m g = Y . o n e ( ' # c o m m e n t - i m g - ' + t h i s . c l i e n t _ i d ) ; v a r   d = c o n t a i n e r . g e t S t y l e ( ' d i s p l a y ' ) ; i f ( d = = ' n o n e ' | | d = = ' ' ) { i f ( ! t h i s . a u t o s t a r t ) { t h i s . l o a d ( p a g e ) } e l s e { t h i s . r e g i s t e r _ d e l e t e _ b u t t o n s ( ) ; t h i s . r e g i s t e r _ p a g i n a t i o n ( ) } 
 c o n t a i n e r . s e t S t y l e ( ' d i s p l a y ' , ' b l o c k ' ) ; i f ( i m g ) { i m g . s e t ( ' s r c ' , M . u t i l . i m a g e _ u r l ( ' t / e x p a n d e d ' , ' c o r e ' ) ) } 
 i f ( c o m m e n t t o g g l e r ) { c o m m e n t t o g g l e r . s e t A t t r i b u t e ( ' a r i a - e x p a n d e d ' , ' t r u e ' ) } } e l s e { c o n t a i n e r . s e t S t y l e ( ' d i s p l a y ' , ' n o n e ' ) ; v a r   c o l l a p s e d i m a g e = ' t / c o l l a p s e d ' ; i f ( Y . o n e ( d o c u m e n t . b o d y ) . h a s C l a s s ( ' d i r - r t l ' ) ) { c o l l a p s e d i m a g e = ' t / c o l l a p s e d _ r t l ' } e l s e { c o l l a p s e d i m a g e = ' t / c o l l a p s e d ' } 
 i f ( i m g ) { i m g . s e t ( ' s r c ' , M . u t i l . i m a g e _ u r l ( c o l l a p s e d i m a g e , ' c o r e ' ) ) } 
 i f ( t a ) { t a . s e t ( ' v a l u e ' , ' ' ) } 
 i f ( c o m m e n t t o g g l e r ) { c o m m e n t t o g g l e r . s e t A t t r i b u t e ( ' a r i a - e x p a n d e d ' , ' f a l s e ' ) } } 
 i f ( t a ) { t a . o n ( ' f o c u s ' , f u n c t i o n ( ) { t h i s . t o g g l e _ t e x t a r e a ( ! 0 ) } , t h i s ) ; t a . o n ( ' b l u r ' , f u n c t i o n ( ) { t h i s . t o g g l e _ t e x t a r e a ( ! 1 ) } , t h i s ) } 
 t h i s . r e g i s t e r _ a c t i o n s ( ) ; r e t u r n ! 1 } , t o g g l e _ t e x t a r e a : f u n c t i o n ( f o c u s ) { v a r   t = Y . o n e ( ' # d l g - c o n t e n t - ' + t h i s . c l i e n t _ i d ) ; i f ( ! t ) { r e t u r n ! 1 } 
 i f ( f o c u s ) { i f ( t . g e t ( ' v a l u e ' ) = = M . u t i l . g e t _ s t r i n g ( ' a d d c o m m e n t ' , ' m o o d l e ' ) ) { t . s e t ( ' v a l u e ' , ' ' ) ; t . s e t S t y l e ( ' c o l o r ' , ' b l a c k ' ) } } e l s e { i f ( t . g e t ( ' v a l u e ' ) = = ' ' ) { t . s e t ( ' v a l u e ' , M . u t i l . g e t _ s t r i n g ( ' a d d c o m m e n t ' , ' m o o d l e ' ) ) ; t . s e t S t y l e ( ' c o l o r ' , ' g r e y ' ) ; t . s e t ( ' r o w s ' , 2 ) } } } , w a i t : f u n c t i o n ( ) { v a r   c o n t a i n e r = Y . o n e ( ' # c o m m e n t - l i s t - ' + t h i s . c l i e n t _ i d ) ; c o n t a i n e r . s e t ( ' i n n e r H T M L ' , ' < d i v   c l a s s = " m d l - a l i g n " > < i m g   s r c = " ' + M . u t i l . i m a g e _ u r l ( ' i / l o a d i n g _ s m a l l ' , ' c o r e ' ) + ' "   / > < / d i v > ' ) } } ) ; n e w   C o m m e n t H e l p e r ( o p t i o n s ) } , i n i t _ a d m i n : f u n c t i o n ( Y ) { v a r   s e l e c t _ a l l = Y . o n e ( ' # c o m m e n t _ s e l e c t _ a l l ' ) ; i f ( s e l e c t _ a l l ) { s e l e c t _ a l l . o n ( ' c l i c k ' , f u n c t i o n ( e ) { v a r   c o m m e n t s = d o c u m e n t . g e t E l e m e n t s B y N a m e ( ' c o m m e n t s ' ) ; v a r   c h e c k e d = ! 1 ; f o r ( v a r   i   i n   c o m m e n t s ) { i f ( c o m m e n t s [ i ] . c h e c k e d ) { c h e c k e d = ! 0 } } 
 f o r ( i   i n   c o m m e n t s ) { c o m m e n t s [ i ] . c h e c k e d = ! c h e c k e d } 
 t h i s . s e t ( ' c h e c k e d ' , ! c h e c k e d ) } ) } 
 v a r   c o m m e n t s _ d e l e t e = Y . o n e ( ' # c o m m e n t s _ d e l e t e ' ) ; i f ( c o m m e n t s _ d e l e t e ) { c o m m e n t s _ d e l e t e . o n ( ' c l i c k ' , f u n c t i o n ( e ) { e . p r e v e n t D e f a u l t ( ) ; v a r   l i s t = ' ' ; v a r   c o m m e n t s = d o c u m e n t . g e t E l e m e n t s B y N a m e ( ' c o m m e n t s ' ) ; f o r ( v a r   i   i n   c o m m e n t s ) { i f ( t y p e o f   c o m m e n t s [ i ] = = ' o b j e c t ' & & c o m m e n t s [ i ] . c h e c k e d ) { l i s t + = ( c o m m e n t s [ i ] . v a l u e + ' - ' ) } } 
 i f ( ! l i s t ) { r e t u r n } 
 v a r   a r g s = { } ; a r g s . m e s s a g e = M . u t i l . g e t _ s t r i n g ( ' c o n f i r m d e l e t e c o m m e n t s ' , ' a d m i n ' ) ; a r g s . c a l l b a c k = f u n c t i o n ( ) { v a r   u r l = M . c f g . w w w r o o t + ' / c o m m e n t / i n d e x . p h p ' ; v a r   d a t a = { ' c o m m e n t i d s ' : l i s t , ' s e s s k e y ' : M . c f g . s e s s k e y , ' a c t i o n ' : ' d e l e t e ' } ; v a r   c f g = { m e t h o d : ' P O S T ' , o n : { c o m p l e t e : f u n c t i o n ( i d , o , p ) { i f ( ! o ) { a l e r t ( ' I O   F A T A L ' ) ; r e t u r n } 
 i f ( o . r e s p o n s e T e x t = = ' y e s ' ) { l o c a t i o n . r e l o a d ( ) } } } , a r g u m e n t s : { s c o p e : t h i s } , h e a d e r s : { ' C o n t e n t - T y p e ' : ' a p p l i c a t i o n / x - w w w - f o r m - u r l e n c o d e d ;   c h a r s e t = U T F - 8 ' } , d a t a : b u i l d _ q u e r y s t r i n g ( d a t a ) } ; Y . i o ( u r l , c f g ) } ; M . u t i l . s h o w _ c o n f i r m _ d i a l o g ( e , a r g s ) } ) } } }   V       https://virtual.mesoamericana.edu.gt/lib/javascript.php/1530296670/comment/comment.js     „&      „&                    ö    [   Ç    ]   Ç   ]   6   Qô ê †êÄ ”–†$êÄ  Ê    M   core_comment	   init   init_adminá!´!ˇˇˇˇ                ´+íHç!´!        	   initB    P"     P"                  Y    CommentHelper    B C   Ö   ;   Ö      C          5û    B -  k  %  k     -  "         B »  ı  ¿  ı        
        5û    B   A    A     f   
        5û  5û   B  y  ë  q  ë     (             B "  ı    ı     —          5û  5û   B ¢    ö       È   :       	   args    B Y
  @  Q
  @     ,   (        5û  5û   B '  Ó    Ó     ?   *        5û    B ¸  †  Ù  †     '             scope    B ®  ù  †  ù     ”   8        5û  5û   B ≤  t  ™  t     [             cid    remove_dom      remove_dom   È  Ú  È     Æ           5û   B 3  n  +  n     I   
        5û  5û   B  é  ƒ  Ü  ƒ     §            B ˚  '  Û  '       
        5û    B è  º  á  º     `   
        5û  5û   B  Â  ø  ›  ø     ∂             scope    B "  Ω    Ω     Û   (       	   node    commentid   B   b    b                5û   B z  ¿  r  ¿     v           5û   B   ª  ˘  ª     ˝             B y  õ  q  õ     u          5û  5û 5û 5û   B  ‹  ˝  ‘  ˝     ÿ            scope    B -  ˚  %  ˚     )            B O  Ó  G  Ó     K  
        5û  5û 5û   B                  j          B  £  ø  õ  ø        
        5û    B  €  ˜  ”  ˜     U   
        5û  5û   B 9   u!  1   u!     :   2        5û   B  É!  2"  {!  2"       
        5û  5ûç!´!          init_adminB d"  ‚&  \"  ‚&     Ê             Y    B ¡"  í#  π"  í#     C  "        5û   B ˙#  ﬂ&  Ú#  ﬂ&  !   e   (       	   list    B  2%  ª&  *%  ª&  #   b   
          B ”%  *&  À%  *&  #             5û  5û 5û 5ûé!´!       é!´!	   initã!´!é!´!   init_adminã!´!    öò;¯^Ô”Áè      [çk‚[çk‚?uï#[„ñÍ   V    :https://virtual.mesoamericana.edu.gt/lib/javascript.php/1530296670/comment/comment.js necko:classified 1 strongly-framed 1 security-info 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 request-method GET response-head HTTP/1.1 200 OK
Server: nginx/1.6.2
Date: Fri, 10 Aug 2018 01:52:42 GMT
Content-Type: application/javascript; charset=utf-8
Etag: "ef919dc0df2878161d9e3a4fd4583a65415e97d9"
Content-Disposition: inline; filename="javascript.php"
Last-Modified: Fri, 29 Jun 2018 22:59:55 GMT
Expires: Thu, 08 Nov 2018 01:52:42 GMT
Cache-Control: public, max-age=7776000, immutable
Accept-Ranges: none
 original-response-headers Server: nginx/1.6.2
Date: Fri, 10 Aug 2018 01:52:42 GMT
Content-Type: application/javascript; charset=utf-8
Transfer-Encoding: chunked
Connection: keep-alive
Etag: "ef919dc0df2878161d9e3a4fd4583a65415e97d9"
Content-Disposition: inline; filename="javascript.php"
Last-Modified: Fri, 29 Jun 2018 22:59:55 GMT
Expires: Thu, 08 Nov 2018 01:52:42 GMT
Pragma: 
Cache-Control: public, max-age=7776000, immutable
Accept-Ranges: none
 uncompressed-len 0 net-response-time-onstart 176 net-response-time-onstop 177 alt-data 1;9955,javascript/moz-bytecode-20180704192850 alt-data-from-child 1   }…